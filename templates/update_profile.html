{% extends 'base.html' %}
{% load widget_tweaks static %}

{% block content %}
<div class="col-md-12 col-sm-12">
  <div class="card card-body">
    <div class="row">
      <div class="col-md-8">
        <h2>Update profile {{ user.username }}</h2>
        <span id="user" style="display:none">{{ user.url }}</span>
      </div>
      <div class="col-md-4">
        <div class="card card-body">
        <div class="container">
            <div class="card">
                <img class="card-img" src="{% if user.picture %} {{ user.picture }} {% else %} \media\uploads\default.jpg {% endif %}" alt="Card image">
                <div class="card-img-overlay">
                  <span class="fa fa-camera pull-right" id="upload"></span>
                </div>
            </div>
        </div>
      </div>
    </div>
    </div>
    <hr>
    <div class="row">
      <div class="container">
        <form method="POST" action="{% url 'update-profile' %}" enctype="multipart/form-data">
        <div class="row">
        <div class="col-md-4 form-group">
          <div class="label">First Name
          {% if update_form.first_name.errors %}
              {% for error in update_form.first_name.errors %}
                  <div class="invalid-feedback" style="display:inline;">
                    {{ error }}
                  </div>
              {% endfor %}
          {% endif %}
          </div>
          {% render_field update_form.first_name class+="form-control" %}
        </div>
        <div class="col-md-4 form-group">
          <div class="label">Last Name
          {% if update_form.last_name.errors %}
              {% for error in update_form.last_name.errors %}
                  <div class="invalid-feedback" style="display:inline;">
                    {{ error }}
                  </div>
              {% endfor %}
          {% endif %}
          </div>
          {% render_field update_form.last_name class+="form-control" %}
        </div>
        <div class="col-md-4 form-group">
          <div class="label">UserName
          {% if update_form.username.errors %}
              {% for error in update_form.username.errors %}
                  <div class="invalid-feedback" style="display:inline;">
                    {{ error }}
                  </div>
              {% endfor %}
          {% endif %}
          </div>
          {% render_field update_form.username class+="form-control" %}
        </div>
      </div>

        <div class="row">
        <div class="col-md-4 form-group">
          <div class="label">Email
          {% if update_form.email.errors %}
              {% for error in update_form.email.errors %}
                  <div class="invalid-feedback" style="display:inline;">
                    {{ error }}
                  </div>
              {% endfor %}
          {% endif %}
          </div>
          {% render_field update_form.email class+="form-control" %}
        </div>
        <div class="col-md-4 form-group">
          <div class="label">Mobile Number
          {% if update_form.mobile_number.errors %}
              {% for error in update_form.mobile_number.errors %}
                  <div class="invalid-feedback" style="display:inline;">
                    {{ error }}
                  </div>
              {% endfor %}
          {% endif %}
          </div>
          {% render_field update_form.mobile_number class+="form-control" %}
        </div>
        <div class="col-md-4 form-group">
          <div class="label">Date of Birth</div>
          {% render_field update_form.date_of_birth class+="form-control" type="date" %}
        </div>

        <hr>
        <div class="col-md-12">
          <div class="label">Address
          {% if update_form.address.errors %}
              {% for error in update_form.address.errors %}
                  <div class="invalid-feedback" style="display:inline;">
                    {{ error }}
                  </div>
              {% endfor %}
          {% endif %}
          </div>
          {% render_field update_form.address class+="form-control" rows="3" %}
        </div>
      </div>
      <hr>
      <div class="row col-md-12">
        <div class="col-md-4">
          <label class="form-label-control">Position
            {% if update_form.position.errors %}
              {% for error in update_form.position.errors %}
                  <div class="invalid-feedback" style="display:inline;">
                    {{ error }}
                  </div>
              {% endfor %}
          {% endif %}
          </label>
          {% render_field update_form.position class="form_control" %}
        </div>
        <div class="col-md-8">
          <p>Interest <span class="fa fa-plus" id="addInterest"></span> </p>
          <span id="interest"></span>
          <span id="interestForm"></span>
        </div>
      </div>
      <div class="row">
        <div class="col-md-12">
        <table class="table">
        <thead class="thead-light">
          <tr>
            <th>Skill <span class="fa fa-plus" id="addSkill"></span> </th>
            <th>Level</th>
            <th>action</th>
          </tr>
        </thead>
        <tbody id="skills-list">

        </tbody>
      </table>
        </div>
        <input type="hidden" name="skills">
        <input type="hidden" name="interest">
        <input type="file" name="picture" style="display:none;">
        <input type="hidden" name="_method" value="PUT">
        <div class="col-md-12" id="skillForm" style="display:inherit;"></div>
        <div class="row col-md-12 justify-content-center">
          <button type="submit" class="btn btn-primary">Update</button>
        </div>
      </div>
      </form>
      </div>
    </div>
  </div>

</div>

{% endblock %}

{% block extra_js %}
<script src="{% static 'js/update.js' %}"></script>

{% endblock %}
